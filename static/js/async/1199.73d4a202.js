"use strict";(self.webpackChunk_hikestack_official=self.webpackChunk_hikestack_official||[]).push([["1199"],{5089:function(e,n,t){var r=this&&this.__createBinding||(Object.create?function(e,n,t,r){void 0===r&&(r=t);var s=Object.getOwnPropertyDescriptor(n,t);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[t]}}),Object.defineProperty(e,r,s)}:function(e,n,t,r){void 0===r&&(r=t),e[r]=n[t]}),s=this&&this.__exportStar||function(e,n){for(var t in e)"default"!==t&&!Object.prototype.hasOwnProperty.call(n,t)&&r(n,e,t)};Object.defineProperty(n,"__esModule",{value:!0}),s(t(3604),n)},8130:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,n){if(e===n)return!0;for(let t=0;t<e.length;t++)if(!Object.is(e[t],n[t]))return!1;return!0}},3206:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0}),n.useCreation=function(e,n){let{current:t}=(0,r.useRef)({deps:n,obj:void 0,initialized:!1});return(!1===t.initialized||!(0,s.default)(t.deps,n))&&(t.deps=n,t.obj=e(),t.initialized=!0),t.obj};let r=t(4194),s=t(8130)},3604:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0}),n.useHike=function(e){let n=(0,a.useUpdate)(),t=(0,s.useRef)(e);return(0,i.useCreation)(()=>(function e(n,t){let s=o.get(n);if(s)return s;if(c.has(n))return n;let i=new Proxy(n,{get(n,s,i){let a=Reflect.get(n,s,i),o=Reflect.getOwnPropertyDescriptor(n,s);return o?.configurable||o?.writable?r(a)||Array.isArray(a)?e(a,t):a:a},set(e,n,r){let s=Reflect.set(e,n,r);return t(),s},deleteProperty(e,n){let r=Reflect.deleteProperty(e,n);return t(),r}});return o.set(n,i),c.set(i,n),i})(t.current,()=>{n()}),[])};let r=t(4256),s=t(4194),i=t(3206),a=t(9307),o=new WeakMap,c=new WeakMap},9307:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0}),n.useUpdate=void 0;let r=t(4194);n.useUpdate=()=>{let[,e]=(0,r.useState)({});return(0,r.useCallback)(()=>e({}),[])}},3736:function(e,n,t){t.r(n),t.d(n,{default:()=>f});var r=t("1549"),s=t("6603"),i=t("5947"),a=t("127"),o=t("9597"),c=t("3460"),u=t("218"),l=t("3357");function d(e){let n=Object.assign({h1:"h1",a:"a",p:"p",code:"code",h2:"h2",pre:"pre"},(0,s.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h1,{id:"usehike",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#usehike",children:"#"}),"useHike"]}),"\n","\n",(0,r.jsxs)("div",{className:"flex space-x-2 items-center",children:[(0,r.jsx)("a",{className:"flex space-x-1 items-center",href:"https://github.com/hikestack/hike/tree/main/packages/hooks/src/use-hike.ts",target:"_blank",children:(0,r.jsxs)(c.z,{variant:"secondary",size:"sm",children:[(0,r.jsx)("span",{children:"源码"}),(0,r.jsx)(u.Z,{className:"w-4 h-4 ml-1"})]})}),(0,r.jsx)("a",{className:"flex space-x-1 items-center",href:"/official/reference/hooks/functions/useHike.html",children:(0,r.jsxs)(c.z,{variant:"secondary",size:"sm",children:[(0,r.jsx)("span",{children:"API 参考"}),(0,r.jsx)(l.Z,{className:"w-4 h-4 ml-1"})]})})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"useHike"}),"是一个自定义的 React Hook，它利用 JavaScript 的 Proxy 对象和 WeakMap 来创建一个可观察的状态对象。当这个状态对象的任何属性（包括嵌套属性）发生变化时，useHike 会自动触发一个回调函数。"]}),"\n",(0,r.jsxs)(n.h2,{id:"安装",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#安装",children:"#"}),"安装"]}),"\n",(0,r.jsx)(o.PackageManagerTabs,{command:"install @hikestack/hooks"}),"\n",(0,r.jsxs)(n.h2,{id:"使用",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#使用",children:"#"}),"使用"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",meta:"pure",children:'import React from "react";\nimport { useHike } from "@hikestack/hooks";\n\nfunction App() {\n	const state = useHike({\n		count: 0,\n		user: {\n			name: "John Doe",\n			age: 30,\n		},\n	});\n\n	const handleChange = () => {\n		// 更新嵌套状态\n		state.user.name = "Roy Lin";\n		// 这将触发状态更新回调，导致组件重新渲染\n	};\n\n	return (\n		<div>\n			<p>User Name: {state.user.name}</p>\n			<p>User Age: {state.user.age}</p>\n			<button onClick={handleChange}>修改名称为: Roy Lin</button>\n			<br />\n			<button onClick={() => state.count++}>点击增加计数: {state.count}</button>\n		</div>\n	);\n}\n\nexport default App;\n'})}),"\n",(0,r.jsxs)(a.Z,{isMobile:"false",demoId:"_guide_hooks_use_hike_1",children:[(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:'import React from "react";\nimport { useHike } from "@hikestack/hooks";\n\nfunction App() {\n	const state = useHike({\n		count: 0,\n		user: {\n			name: "John Doe",\n			age: 30,\n		},\n	});\n\n	const handleChange = () => {\n		// 更新嵌套状态\n		state.user.name = "Roy Lin";\n		// 这将触发状态更新回调，导致组件重新渲染\n	};\n\n	return (\n		<div>\n			<p>User Name: {state.user.name}</p>\n			<p>User Age: {state.user.age}</p>\n			<button onClick={handleChange}>修改名称为: Roy Lin</button>\n			<br />\n			<button onClick={() => state.count++}>点击增加计数: {state.count}</button>\n		</div>\n	);\n}\n\nexport default App;\n'})})}),(0,r.jsx)(i.default,{})]})]})}function h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,s.ah)(),e.components);return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(d,e)})):d(e)}let f=h;h.__RSPRESS_PAGE_META={},h.__RSPRESS_PAGE_META["guide%2Fhooks%2Fuse-hike.mdx"]={toc:[{id:"安装",text:"安装",depth:2},{id:"使用",text:"使用",depth:2}],title:"useHike",frontmatter:{}}},5947:function(e,n,t){t.r(n),t.d(n,{default:function(){return i}});var r=t(1549);t(4194);var s=t(5089);let i=function(){let e=(0,s.useHike)({count:0,user:{name:"John Doe",age:30}});return(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{children:["User Name: ",e.user.name]}),(0,r.jsxs)("p",{children:["User Age: ",e.user.age]}),(0,r.jsx)("button",{onClick:()=>{e.user.name="Roy Lin"},children:"修改名称为: Roy Lin"}),(0,r.jsx)("br",{}),(0,r.jsxs)("button",{onClick:()=>e.count++,children:["点击增加计数: ",e.count]})]})}},3460:function(e,n,t){t.d(n,{z:()=>l});var r=t("1549"),s=t("4194"),i=t("4323"),a=t("9986"),o=t("976"),c=t("6345");let u=(0,a.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=s.forwardRef((e,n)=>{let{className:t,variant:s,size:a,asChild:l=!1,...d}=e,h=l?i.g7:"button";return(0,r.jsx)(h,{className:function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return(0,c.m6)((0,o.W)(n))}(u({variant:s,size:a,className:t})),ref:n,...d})});l.displayName="Button"}}]);